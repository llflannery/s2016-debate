"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator.throw(value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments)).next());
    });
};
const path_1 = require("path");
const utils_1 = require("../utils");
class FileSystemDeployer {
    constructor(deployDir) {
        this.deployDir = deployDir;
    }
    ;
    deploy(project) {
        return __awaiter(this, void 0, void 0, function* () {
            yield utils_1.createDir(this.deployDir);
            yield utils_1.writeProm(project.compiledPage.index, path_1.join(this.deployDir, 'index.html'));
            yield utils_1.writeProm(project.compiledPage.scripts.data, path_1.join(this.deployDir, project.compiledPage.scripts.file));
            yield utils_1.writeProm(project.compiledPage.styles.data, path_1.join(this.deployDir, project.compiledPage.styles.file));
            yield utils_1.copyProm(path_1.join(project.report.workingDirectory, '.ledeCache', 'assets'), path_1.join(this.deployDir, 'assets'));
        });
    }
}
exports.FileSystemDeployer = FileSystemDeployer;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlcGxveWVycy9GaWxlU3lzdGVtRGVwbG95ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsdUJBQXFCLE1BQU0sQ0FBQyxDQUFBO0FBRTVCLHdCQUErQyxVQUFVLENBQUMsQ0FBQTtBQUkxRDtJQUNFLFlBQW1CLFNBQWlCO1FBQWpCLGNBQVMsR0FBVCxTQUFTLENBQVE7SUFBRyxDQUFDOztJQUVsQyxNQUFNLENBQUMsT0FBNEQ7O1lBQ3ZFLE1BQU0saUJBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDaEMsTUFBTSxpQkFBUyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLFdBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUM7WUFDaEYsTUFBTSxpQkFBUyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxXQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzVHLE1BQU0saUJBQVMsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsV0FBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUMxRyxNQUFNLGdCQUFRLENBQUMsV0FBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLEVBQUUsWUFBWSxFQUFFLFFBQVEsQ0FBQyxFQUFFLFdBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUE7UUFDL0csQ0FBQztLQUFBO0FBQ0gsQ0FBQztBQVZZLDBCQUFrQixxQkFVOUIsQ0FBQSIsImZpbGUiOiJkZXBsb3llcnMvRmlsZVN5c3RlbURlcGxveWVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgam9pbiB9IGZyb20gXCJwYXRoXCI7XG5cbmltcG9ydCB7IGNyZWF0ZURpciwgd3JpdGVQcm9tLCBjb3B5UHJvbSB9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHsgQ29tcGlsZWRQYWdlLCBQcm9qZWN0UmVwb3J0IH0gZnJvbSBcIi4uL2ludGVyZmFjZXNcIjtcblxuXG5leHBvcnQgY2xhc3MgRmlsZVN5c3RlbURlcGxveWVyIHtcbiAgY29uc3RydWN0b3IocHVibGljIGRlcGxveURpcjogc3RyaW5nKSB7fTtcblxuICBhc3luYyBkZXBsb3kocHJvamVjdDoge3JlcG9ydDogUHJvamVjdFJlcG9ydCwgY29tcGlsZWRQYWdlOiBDb21waWxlZFBhZ2V9KSB7XG4gICAgYXdhaXQgY3JlYXRlRGlyKHRoaXMuZGVwbG95RGlyKTtcbiAgICBhd2FpdCB3cml0ZVByb20ocHJvamVjdC5jb21waWxlZFBhZ2UuaW5kZXgsIGpvaW4odGhpcy5kZXBsb3lEaXIsICdpbmRleC5odG1sJykpO1xuICAgIGF3YWl0IHdyaXRlUHJvbShwcm9qZWN0LmNvbXBpbGVkUGFnZS5zY3JpcHRzLmRhdGEsIGpvaW4odGhpcy5kZXBsb3lEaXIsIHByb2plY3QuY29tcGlsZWRQYWdlLnNjcmlwdHMuZmlsZSkpO1xuICAgIGF3YWl0IHdyaXRlUHJvbShwcm9qZWN0LmNvbXBpbGVkUGFnZS5zdHlsZXMuZGF0YSwgam9pbih0aGlzLmRlcGxveURpciwgcHJvamVjdC5jb21waWxlZFBhZ2Uuc3R5bGVzLmZpbGUpKTtcbiAgICBhd2FpdCBjb3B5UHJvbShqb2luKHByb2plY3QucmVwb3J0LndvcmtpbmdEaXJlY3RvcnksICcubGVkZUNhY2hlJywgJ2Fzc2V0cycpLCBqb2luKHRoaXMuZGVwbG95RGlyLCAnYXNzZXRzJykpXG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2VtdXJyYXkvV2Vic3Rvcm1Qcm9qZWN0cy9sZWRlL3NyYyJ9
